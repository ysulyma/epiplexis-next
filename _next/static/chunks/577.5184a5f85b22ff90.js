"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{577:function(e,t,n){n.r(t),n.d(t,{Audio:function(){return eX},Controls:function(){return te},IdMap:function(){return eq},KeyMap:function(){return U},Keymap:function(){return U},KeymapContext:function(){return z},Media:function(){return eG},Playback:function(){return e$},PlaybackContext:function(){return A},Player:function(){return eK},Script:function(){return eQ},Utils:function(){return e7},Video:function(){return e8},useKeymap:function(){return K},useMarkerUpdate:function(){return G},usePlayback:function(){return R},usePlayer:function(){return H},useScript:function(){return X},useTime:function(){return O},useTimeUpdate:function(){return q}});var r,i,a,o=n(7294);function s(e){return new Promise(t=>{if(e.readyState===e.HAVE_FUTURE_DATA)return t();e.addEventListener("canplay",()=>t())})}function l(e){return new Promise(t=>{if(e.readyState===e.HAVE_ENOUGH_DATA)return t();e.addEventListener("canplaythrough",()=>t())})}var u=Object.freeze({__proto__:null,awaitMediaCanPlay:s,awaitMediaCanPlayThrough:l});function c(e,t,n){return e<=t&&t<n}function h(e,t){for(let n of t)e[n]=e[n].bind(e)}function d(e,t,n){return e+n*(t-e)}function m(e,t,n){return Math.min(n,Math.max(e,t))}function p(e,t,n){return m(e,t,n)}var f=Object.freeze({__proto__:null,between:c,bind:h,lerp:d,clamp:m,constrain:p,range:function e(t,n){return void 0===n?e(0,t):Array(n-t).fill(null).map((e,n)=>t+n)},wait:function(e){return new Promise(t=>{setTimeout(t,e)})},waitFor:function(e,t=10){return new Promise(n=>{let r=()=>{e()?n():setTimeout(r,t)};r()})}}),v={exports:{}},y="object"==typeof Reflect?Reflect:null,b=y&&"function"==typeof y.apply?y.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!=e};function k(){k.init.call(this)}v.exports=k,v.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}P(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&P(e,"error",i,{once:!0})})},k.EventEmitter=k,k.prototype._events=void 0,k.prototype._eventsCount=0,k.prototype._maxListeners=void 0;var E=10;function _(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function w(e){return void 0===e._maxListeners?k.defaultMaxListeners:e._maxListeners}function C(e,t,n,r){if(_(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=w(e))>0&&o.length>i&&!o.warned){o.warned=!0;var i,a,o,s=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,console&&console.warn&&console.warn(s)}return e}function T(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=T.bind(r);return i.listener=n,r.wrapFn=i,i}function L(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):S(i,i.length)}function x(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function S(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function P(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if("number"!=typeof e||e<0||g(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");E=e}}),k.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||g(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},k.prototype.getMaxListeners=function(){return w(this)},k.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,o=Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)b(s,this,t);else for(var l=s.length,u=S(s,l),n=0;n<l;++n)b(u[n],this,t);return!0},k.prototype.addListener=function(e,t){return C(this,e,t,!1)},k.prototype.on=k.prototype.addListener,k.prototype.prependListener=function(e,t){return C(this,e,t,!0)},k.prototype.once=function(e,t){return _(t),this.on(e,M(this,e,t)),this},k.prototype.prependOnceListener=function(e,t){return _(t),this.prependListener(e,M(this,e,t)),this},k.prototype.removeListener=function(e,t){var n,r,i,a,o;if(_(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},k.prototype.off=k.prototype.removeListener,k.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},k.prototype.listeners=function(e){return L(this,e,!0)},k.prototype.rawListeners=function(e){return L(this,e,!1)},k.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):x.call(e,t)},k.prototype.listenerCount=x,k.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};let N=Symbol.for("@lqv/playback");N in globalThis||(globalThis[N]=(0,o.createContext)(null));let A=globalThis[N];function R(){return(0,o.useContext)(A)}function O(e,t,n){let r=R(),i=(0,o.useRef)();(0,o.useEffect)(()=>{let n="function"==typeof t?n=>{let r=t(n);r!==i.current&&e(r),i.current=r}:t=>{t!==i.current&&e(t),i.current=t};return r.on("seek",n),r.on("timeupdate",n),n(r.currentTime),()=>{r.off("seek",n),r.off("timeupdate",n)}},"function"==typeof t?n:t)}function F(){let e=R(),t=(0,o.useRef)();return(0,o.useEffect)(()=>{e.on("cuechange",()=>{for(let n of(t.current.innerHTML="",e.captions))t.current.appendChild(n)})},[e]),o.createElement("div",{className:"lv-captions-display",ref:t})}let D={Control:"Ctrl",Alt:"Alt",Shift:"Shift",Meta:"Meta"},B={};for(let e of["AltGraph","CapsLock","FnLock","NumLock","ScrollLock","SymbolLock","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","PageDown","PageUp","CrSel","EraseEof","ExSel","ContextMenu","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","LogOff","PowerOff","PrintScreen","WakeUp","AllCandidates","CodeInput","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","SingleCandidate","HangulMode","HanjaMode","JunjaMode","HiraganaKatakana","KanaMode","KanjiMode","ZenkakuHanaku","AppSwitch","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","MannerMode","VoiceDial","ChannelDown","ChannelUp","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","AudioBalanceLeft","AudioBalanceRight","AudioBassDown","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioBassUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeMute","AudioVolumeUp","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeMute","MicrophoneVolumeUp","TV","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ClosedCaptionToggle","DisplaySwap","DVR","GuideNextDay","GuidePreviousDay","InstantReplay","ListProgram","LiveContent","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","SplitScreenToggle","STBInput","STBPower","VideoModeNext","ZoomToggle","SpeechCorrectionList","SpeechInputToggle","SpellCheck","MailForward","MailReply","MailSend","LaunchCalculator","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchMyComputer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop"])B[e.toLowerCase()]=e;let V=Object.keys(D).map(e=>D[e]),I=["Backspace","Enter","Space","Tab"];class U{constructor(){this.__bindings={}}static identify(e){let t=[];for(let n in D)e.getModifierState(n)&&t.push(D[n]);return e.key in D||(e.code.startsWith("Digit")?t.push(e.code.slice(5)):e.code.startsWith("Key")?t.push(e.code.slice(3)):I.includes(e.code)?t.push(e.code):t.push(e.key)),t.join("+")}static normalize(e){return e.split("+").map(e=>{let t=e.toLowerCase();return""===e?"":B[t]?B[t]:e[0].toUpperCase()+t.slice(1)}).sort((e,t)=>V.includes(e)?V.includes(t)?V.indexOf(e)-V.indexOf(t):-1:V.includes(t)?1:e<t?-1:e===t?0:1).join("+")}bind(e,t){if(e.indexOf(",")>-1){for(let n of e.split(","))this.bind(n,t);return}e=U.normalize(e),this.__bindings.hasOwnProperty(e)||(this.__bindings[e]=[]),this.__bindings[e].push(t)}unbind(e,t){if(e.indexOf(",")>-1){for(let n of e.split(","))this.unbind(n,t);return}if(e=U.normalize(e),!this.__bindings.hasOwnProperty(e))return;let n=this.__bindings[e].indexOf(t);n<0||(this.__bindings[e].splice(n,1),0!==this.__bindings[e].length||delete this.__bindings[e])}getKeys(){return Object.keys(this.__bindings)}getHandlers(e){return this.__bindings.hasOwnProperty(e)?this.__bindings[e].slice():[]}handle(e){let t=U.identify(e);if(this.__bindings[t]||this.__bindings["*"]){if(this.__bindings[t])for(let n of(e.preventDefault(),this.__bindings[t]))n(e);if(this.__bindings["*"])for(let t of this.__bindings["*"])t(e)}}}let j=Symbol.for("@lqv/keymap");j in globalThis||(globalThis[j]=(0,o.createContext)(null));let z=globalThis[j];function K(){return(0,o.useContext)(z)}function H(){return(0,o.useContext)(eK.Context)}function G(e,t){let n=X();(0,o.useEffect)(()=>(n.on("markerupdate",e),()=>{n.off("markerupdate",e)}),[e,n,...t])}function X(){return H().script}function q(e,t){let n=R();(0,o.useEffect)(()=>(n.on("seek",e),n.on("timeupdate",e),()=>{n.off("seek",e),n.off("timeupdate",e)}),[e,n,...t])}z.displayName="Keymap";let Y=RegExp("^"+"(?:(\\d+):)?".repeat(3)+"(\\d+)(?:\\.(\\d+))?$");function $(e){if("−"===e[0]||"-"===e[0])return-$(e.slice(1));let t=e.split(":").map(e=>parseInt(e,10));for(;t.length<4;)t.unshift(0);let n=e.match(/\.(\d{0,3})/);n?t.push(parseInt(n[1].padEnd(3,"0"))):t.push(0);let[r,i,a,o,s]=t;return s+1e3*(o+60*(a+60*(i+24*r)))}function W(e){if(e<0)return"−"+W(-e);let t=!0,n="";for(let r of[Math.floor(e/864e5),Math.floor(e/36e5%24),Math.floor(e/6e4%60)])t?0!==r&&(t=!1,n+=r.toString()+":"):n+=r.toString().padStart(2,"0")+":";return t&&(n+="0:"),n+=Math.floor(e/1e3%60).toString().padStart(2,"0")}var Q=Object.freeze({__proto__:null,timeRegexp:Y,parseTime:$,formatTimeDuration:function(e){let t=["P"],n=[],r=Math.floor(e/864e5),i=Math.floor(e/36e5%24),a=Math.floor(e/6e4%60),o=e/1e3%60;return r>0&&t.push(`${r}D`),i>0&&n.push(`${i}H`),a>0&&n.push(`${a}M`),o>0&&n.push(`${o.toFixed(3).replace(/\.?0+$/,"")}S`),n.length>0&&t.push("T",...n),t.join("")},formatTime:W,formatTimeMs:function e(t){if(t<0)return"−"+e(-t);let n=Math.floor(t%1e3);return 0===n?W(t):W(t)+"."+String(n).padStart(3,"0").replace(/0+$/,"")}});function J(e){let t=H(),{playback:n}=t,{cols:r=5,rows:i=5,frequency:a=4,path:s,progress:l,show:u,title:c,height:h=100,width:d=160}=e,m=r*i;(0,o.useEffect)(()=>{let e=Math.floor(Math.floor(n.duration/a/1e3)/m);t.hub.on("canplay",()=>{for(let t=0;t<=e;++t)new Image().src=s.replace("%s",t.toString())})},[m,a,s,n.duration,t]);let p=l*n.duration/1e3,f=Math.floor(p/a),v=Math.floor(f/m),y=f%m,b=s.replace("%s",v.toString());return o.createElement("div",{className:"lv-controls-thumbnail",style:{display:u?"block":"none",left:`calc(${100*l}%)`}},c&&o.createElement("span",{className:"lv-thumbnail-title"},c),o.createElement("div",{className:"lv-thumbnail-box"},o.createElement("img",{src:b,style:{left:`-${y%i*d}px`,top:`-${Math.floor(y/i)*h}px`}}),o.createElement("span",{className:"lv-thumbnail-time"},W(1e3*p))))}let Z="undefined"!=typeof window?window.matchMedia?.("(any-hover: hover)")?.matches:void 0;function ee(e,t=()=>{},n=()=>{}){return r=>{if(r instanceof MouseEvent){if(0!==r.button)return;let i=r.clientX,a=r.clientY,o=e=>{let t=e.clientX-i,r=e.clientY-a;return document.body.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o),n(e,{x:e.clientX,y:e.clientY,dx:t,dy:r})},s=t=>{let n=t.clientX-i,r=t.clientY-a;return i=t.clientX,a=t.clientY,e(t,{x:t.clientX,y:t.clientY,dx:n,dy:r})};return document.body.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("mouseup",o,{passive:!1}),t(r,{x:i,y:a},o,s)}{r.preventDefault();let i=r.changedTouches,a=i[0].identifier,o=i[0].clientX,s=i[0].clientY,l=e=>{for(let t of(e.preventDefault(),Array.from(e.changedTouches))){if(t.identifier!==a)continue;let r=t.clientX-o,i=t.clientY-s;return window.removeEventListener("touchend",l,{capture:!1,passive:!1}),window.removeEventListener("touchcancel",l,{capture:!1,passive:!1}),window.removeEventListener("touchmove",u,{capture:!1,passive:!1}),n(e,{x:t.clientX,y:t.clientY,dx:r,dy:i})}},u=t=>{for(let n of(t.preventDefault(),Array.from(t.changedTouches))){if(n.identifier!==a)continue;let r=n.clientX-o,i=n.clientY-s;return o=n.clientX,s=n.clientY,e(t,{x:n.clientX,y:n.clientY,dx:r,dy:i})}};return window.addEventListener("touchend",l,{capture:!1,passive:!1}),window.addEventListener("touchcancel",l,{capture:!1,passive:!1}),window.addEventListener("touchmove",u,{capture:!1,passive:!1}),t(r,{x:o,y:s},l,u)}}}let et=(e,t)=>n=>{null!==n&&e(n),null!==t&&("function"==typeof t?t(n):"object"==typeof t&&(t.current=n))};function en(e,t,n){let r=Symbol.for(e);if(!(r in globalThis)){let e=(0,o.createContext)(t);e.displayName=n,globalThis[r]=e}return globalThis[r]}function er(e){if(Z)return{onClick:e};{let t,n;return{onTouchStart:e=>{"number"!=typeof t&&(n=e.currentTarget,t=e.changedTouches[0].identifier)},onTouchEnd:r=>{if("number"==typeof t){for(let i of Array.from(r.changedTouches))if(i.identifier===t){n.contains(document.elementFromPoint(i.clientX,i.clientY))&&e(r),t=void 0;break}}}}}}function ei(e,t){return o.Children.map(e,e=>(0,o.isValidElement)(e)?("children"in e.props&&(e=(0,o.cloneElement)(e,{children:ei(e.props.children,t)})),t(e)):e)}function ea(){return(0,o.useReducer)(e=>e+1,0)[1]}var eo=Object.freeze({__proto__:null,captureRef:et,createUniqueContext:en,combineRefs:function(...e){return t=>{for(let n of e)"function"==typeof n?n(t):null===n||"object"==typeof n&&n.hasOwnProperty("current")&&(n.current=t)}},onClick:er,onDrag:function(e,t,n){let r=ee(e,t,n);return{"data-affords":"click",onMouseDown:e=>r(e.nativeEvent),onTouchStart:e=>r(e.nativeEvent)}},recursiveMap:ei,useForceUpdate:ea,usePromise:function(e=[]){let t=(0,o.useRef)(),n=(0,o.useRef)();return[(0,o.useMemo)(()=>new Promise((e,r)=>{t.current=e,n.current=r}),e),t.current,n.current]}});function es(e){let t=K(),n=R(),r=X(),[i,a]=(0,o.useState)({scrubber:n.currentTime/n.duration,thumb:n.currentTime/n.duration}),[s,l]=(0,o.useState)(!1),u=(0,o.useRef)(),h=(0,o.useCallback)(()=>{if(n.seeking)return;let e=n.currentTime/n.duration;a({scrubber:e,thumb:e})},[n]),d=(0,o.useCallback)(()=>{let e=n.currentTime/n.duration;a(t=>({scrubber:e,thumb:t.thumb}))},[n]),p=(0,o.useCallback)(()=>{let e=n.currentTime/n.duration;a(t=>({scrubber:e,thumb:t.thumb}))},[n]),f=(0,o.useCallback)(()=>n.seek(n.currentTime-5e3),[n]),v=(0,o.useCallback)(()=>n.seek(n.currentTime+5e3),[n]),y=(0,o.useCallback)(()=>n.seek(n.currentTime-1e4),[n]),b=(0,o.useCallback)(()=>n.seek(n.currentTime+1e4),[n]),g=(0,o.useCallback)(e=>{let t=parseInt(e.key,10);isNaN(t)||n.seek(n.duration*t/10)},[n]);(0,o.useEffect)(()=>(n.on("seek",h),n.on("seeked",d),n.on("timeupdate",p),t.bind("ArrowLeft",f),t.bind("ArrowRight",v),t.bind("J",y),t.bind("L",b),t.bind("0,1,2,3,4,5,6,7,8,9",g),r&&(t.bind("W",r.back),t.bind("E",r.forward)),()=>{n.off("seek",h),n.off("seeked",d),n.off("timeupdate",p),t.unbind("ArrowLeft",f),t.unbind("ArrowRight",v),t.unbind("J",y),t.unbind("L",b),t.unbind("0,1,2,3,4,5,6,7,8,9",g),r&&(t.unbind("W",r.back),t.unbind("E",r.forward))}),[y,f,b,v,t,n,r,h,g,d,p]);let k=(0,o.useMemo)(()=>{if(!Z)return{};let e=ee((e,{x:t})=>{let r=u.current.getBoundingClientRect(),i=m(0,(t-r.left)/r.width,1);a({scrubber:i,thumb:i}),n.seek(i*n.duration)},e=>{n.seeking=!0;let t=u.current.getBoundingClientRect(),r=m(0,(e.clientX-t.left)/t.width,1);a({scrubber:r,thumb:r}),n.seek(r*n.duration)},()=>n.seeking=!1);return{onMouseDown:t=>e(t.nativeEvent)}},[n]),E=(0,o.useMemo)(()=>{let e={};Z&&Object.assign(e,{onMouseOver:()=>l(!0),onMouseMove:e=>{let t=u.current.getBoundingClientRect(),n=m(0,(e.clientX-t.left)/t.width,1);a(e=>({scrubber:e.scrubber,thumb:n}))},onMouseOut:()=>l(!1)});let t=ee((e,{x:t})=>{let n=u.current.getBoundingClientRect(),r=m(0,(t-n.left)/n.width,1);a({scrubber:r,thumb:r})},e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,l(!0)},(e,{x:t})=>{e.preventDefault();let r=u.current.getBoundingClientRect(),i=m(0,(t-r.left)/r.width,1);l(!1),n.seeking=!1,n.seek(i*n.duration)});return e.ref=et(e=>{e.addEventListener("touchstart",t,{passive:!1})}),e},[n]),_=(0,o.useMemo)(()=>{let e=ee((e,{x:t})=>{let n=u.current.getBoundingClientRect(),r=m(0,(t-n.left)/n.width,1);a({scrubber:r,thumb:r})},e=>{e.preventDefault(),e.stopPropagation(),n.seeking=!0,l(!0)},(e,{x:t})=>{e.preventDefault();let r=u.current.getBoundingClientRect(),i=m(0,(t-r.left)/r.width,1);l(!1),n.seeking=!1,n.seek(i*n.duration)});return{ref:et(t=>{t.addEventListener("touchstart",e,{passive:!1})})}},[n]),w=e.thumbs&&e.thumbs.highlights||[],C=w.find(e=>c(e.time/n.duration,i.thumb,e.time/n.duration+.01)),T=C?C.title:null;return o.createElement("div",{className:"lv-controls-scrub",ref:u,...k},e.thumbs&&o.createElement(J,{...e.thumbs,progress:i.thumb,show:s,title:T}),o.createElement("div",{className:"lv-controls-scrub-wrap",...E},o.createElement("svg",{className:"lv-controls-scrub-progress",preserveAspectRatio:"none",viewBox:"0 0 100 10"},o.createElement("rect",{className:"lv-progress-elapsed",x:"0",y:"0",height:"10",width:100*i.scrubber}),o.createElement("rect",{className:"lv-progress-remaining",x:100*i.scrubber,y:"0",height:"10",width:(1-i.scrubber)*100}),w.map(({time:e})=>o.createElement("rect",{key:e,className:["lv-thumb-highlight"].concat(e<=n.currentTime?"past":[]).join(" "),x:e/n.duration*100,y:"0",width:"1",height:"10"}))),o.createElement("svg",{className:"lv-scrubber",style:{left:`calc(${100*i.scrubber}% - 6px)`},viewBox:"0 0 100 100",..._},o.createElement("circle",{cx:"50",cy:"50",r:"50",stroke:"none"}))))}function el(e){let t=K(),n=R(),[r,i]=(0,o.useState)(!0),a=(0,o.useRef)(0),s=(0,o.useCallback)(()=>{n.paused||(void 0!==a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>i(!1),3e3),i(!0))},[n]);(0,o.useEffect)(()=>{t.bind("*",s),document.body.addEventListener("touchstart",s),document.body.addEventListener("mousemove",s),n.on("play",s),n.on("pause",()=>{clearTimeout(a.current),i(!0)}),n.on("stop",()=>{clearTimeout(a.current),i(!0)}),document.body.addEventListener("mouseleave",()=>{n.paused||i(!1)})},[t,n,s]);let l=["rp-controls","lv-controls"];return r||l.push("hidden"),o.createElement("div",{className:l.join(" ")},o.createElement(es,{thumbs:e.thumbs}),o.createElement("div",{className:"lv-controls-buttons"},e.controls instanceof Array?o.createElement(o.Fragment,null,eK.defaultControlsLeft,o.createElement("div",{className:"lv-controls-right"},...e.controls,eK.defaultControlsRight)):e.controls))}function eu(){let e=H(),t=K(),[n,r]=(0,o.useState)(!1),i=(0,o.useCallback)(t=>{e.canvas.parentElement.classList.toggle("lv-captions"),t.currentTarget instanceof HTMLButtonElement&&t.currentTarget.blur()},[e.canvas]);(0,o.useEffect)(()=>(r(!!e.canvas.querySelector("track")),t.bind("C",i),()=>{t.unbind("C",i)}),[t,e.canvas,i]);let a=(0,o.useMemo)(()=>er(i),[i]),s=(0,o.useMemo)(()=>n?{}:{display:"none"},[n]);return o.createElement("button",{className:"lv-controls-captions",...a,style:s,title:"Captions (c)"},o.createElement("svg",{viewBox:"0 0 36 36"},o.createElement("path",{d:"M 6.00014 8.00002 C 4.33815 8.00002 2.99981 8.8919 2.99981 9.99989 L 2.99981 25.9999 C 2.99981 27.1079 4.33815 27.9998 6.00014 27.9998 L 30.0002 27.9998 C 31.6622 27.9998 33 27.1079 33 25.9999 L 33 9.99989 C 33 8.8919 31.6622 8.00002 30.0002 8.00002 L 6.00014 8.00002 Z M 14.4032 14.0389 C 15.33 14.0389 16.0827 14.3128 16.6615 14.8606 C 17.006 15.1844 17.2644 15.6495 17.4366 16.2558 L 15.9225 16.6176 C 15.833 16.2248 15.6452 15.9148 15.3592 15.6874 C 15.0768 15.46 14.7322 15.3463 14.3257 15.3463 C 13.7642 15.3463 13.3077 15.5479 12.9563 15.9509 C 12.6083 16.354 12.4344 17.0069 12.4344 17.9095 C 12.4344 18.8672 12.6066 19.5493 12.9511 19.9559 C 13.2956 20.3624 13.7435 20.5656 14.2947 20.5656 C 14.7012 20.5656 15.0509 20.4365 15.3437 20.1781 C 15.6366 19.9197 15.8467 19.5132 15.9742 18.9585 L 17.4573 19.4288 C 17.2299 20.2556 16.851 20.8705 16.3204 21.2736 C 15.7933 21.6732 15.1233 21.8731 14.3102 21.8731 C 13.3043 21.8731 12.4774 21.5303 11.8298 20.8447 C 11.1821 20.1557 10.8582 19.2152 10.8582 18.0232 C 10.8582 16.7623 11.1838 15.7839 11.8349 15.0879 C 12.486 14.3886 13.3422 14.0389 14.4032 14.0389 Z M 22.0462 14.0389 C 22.9729 14.0389 23.7257 14.3128 24.3044 14.8606 C 24.6489 15.1844 24.9073 15.6495 25.0796 16.2558 L 23.5655 16.6176 C 23.4759 16.2248 23.2881 15.9148 23.0022 15.6874 C 22.7197 15.46 22.3752 15.3463 21.9687 15.3463 C 21.4071 15.3463 20.9506 15.5479 20.5992 15.9509 C 20.2513 16.354 20.0773 17.0069 20.0773 17.9095 C 20.0773 18.8672 20.2496 19.5493 20.5941 19.9559 C 20.9386 20.3624 21.3864 20.5656 21.9377 20.5656 C 22.3442 20.5656 22.6938 20.4365 22.9867 20.1781 C 23.2795 19.9197 23.4897 19.5132 23.6171 18.9585 L 25.1002 19.4288 C 24.8729 20.2556 24.4939 20.8705 23.9634 21.2736 C 23.4363 21.6732 22.7662 21.8731 21.9532 21.8731 C 20.9472 21.8731 20.1204 21.5303 19.4727 20.8447 C 18.825 20.1557 18.5012 19.2152 18.5012 18.0232 C 18.5012 16.7623 18.8267 15.7839 19.4779 15.0879 C 20.129 14.3886 20.9851 14.0389 22.0462 14.0389 Z"})))}let ec=void 0!==globalThis.document,eh=e=>e,ed=!!ec&&["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"].map(e=>document[e]).concat(!1).find(e=>void 0!==e),em=ec?["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].map(e=>document.body[e]).concat(()=>{}).find(eh).bind(document.body):async()=>{},ep=ec?["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].map(e=>document[e]).concat(async()=>{}).find(eh).bind(document):async()=>{},ef=!1,ev=[],ey=ed?em:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!0},window.parent.origin),!ef)for(let e of(ef=!0,ev))e()},eb=ed?ep:()=>{if(window.parent.postMessage({type:"fake-fullscreen",value:!1},window.parent.origin),ef)for(let e of(ef=!1,ev))e()},eg=ed?()=>["fullscreen","webkitIsFullScreen","mozFullScreen"].map(e=>document[e]).find(e=>void 0!==e):()=>ef,ek=ed?function(e){for(let t of["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"])document.addEventListener(t,e)}:e=>{ev.push(e)},eE={EXIT_FULL_SCREEN:"Exit full screen",ENTER_FULL_SCREEN:"Full screen",MUTE:"Mute",UNMUTE:"Unmute",PAUSE:"Pause",PLAY:"Play"},e_=()=>eg()?eb():ey(),ew=er(e_);function eC(){let e=K(),t=ea();(0,o.useEffect)(()=>(ek(t),e.bind("F",e_),()=>{e.unbind("F",e_)}),[t,e]);let n=eg(),r=(n?eE.EXIT_FULL_SCREEN:eE.ENTER_FULL_SCREEN)+" (f)";return o.createElement("button",{className:"lv-controls-fullscreen","aria-label":r,title:r,...ew},o.createElement("svg",{viewBox:"0 0 36 36"},n?eT:eM))}let eT=o.createElement(o.Fragment,null,o.createElement("path",{fill:"white",d:"M 14 14 h -4 v 2 h 6 v -6 h -2 v 4 z"}),o.createElement("path",{fill:"white",d:"M 22 14 v -4 h -2 v 6 h 6 v -2 h -4 z"}),o.createElement("path",{fill:"white",d:"M 20 26 h 2 v -4 h 4 v -2 h -6 v 6 z"}),o.createElement("path",{fill:"white",d:"M 10 22 h 4 v 4 h 2 v -6 h -6 v 2 z"})),eM=o.createElement(o.Fragment,null,o.createElement("path",{fill:"white",d:"M 10 16 h 2 v -4 h 4 v -2 h -6 v 6 z"}),o.createElement("path",{fill:"white",d:"M 20 10 v 2 h 4 v 4 h 2 v -6 h -6 z"}),o.createElement("path",{fill:"white",d:"M 24 24 h -4 v 2 h 6 v -6 h -2 v 4 z"}),o.createElement("path",{fill:"white",d:"M 12 20 h -2 v 6 h 6 v -2 h -4 v -4 z"}));function eL(){let e=K(),t=R(),n=ea();console.log("render?"),(0,o.useEffect)(()=>{let r=["pause","play","seeking","seeked","stop"];for(let e of r)t.on(e,()=>{console.log(e),n()});let i=()=>t[t.paused?"play":"pause"]();return e.bind("K",i),e.bind("Space",()=>{console.log("space"),i()}),()=>{for(let e of r)t.off(e,n);e.unbind("K",i),e.unbind("Space",i)}},[n,e,t]);let r=(0,o.useMemo)(()=>er(()=>t.paused?t.play():t.pause()),[t]),i=(t.paused||t.seeking?eE.PLAY:eE.PAUSE)+" (k)";return o.createElement("button",{className:"lv-controls-playpause","aria-label":i,title:i,...r},o.createElement("svg",{viewBox:"0 0 36 36"},t.paused||t.seeking?ex:eS))}let ex=o.createElement("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"white"}),eS=o.createElement("path",{d:"M 12 26 h 4 v -16 h -4 z M 21 26 h 4 v -16 h -4 z",fill:"white"}),eP=[.25,.5,.75,1,1.25,1.5,2];function eN(){let e=H(),{keymap:t,playback:n}=e,[r,i]=(0,o.useState)(a.None),[s,l]=(0,o.useState)(n.playbackRate),u=ea();(0,o.useEffect)(()=>{let r=()=>l(n.playbackRate),o=()=>i(a.None),s=()=>n.playbackRate=eO(eP,eP.indexOf(n.playbackRate)-1),u=()=>n.playbackRate=eO(eP,eP.indexOf(n.playbackRate)+1);return n.on("ratechange",r),e.hub.on("canvasClick",o),t.bind("Shift+<",s),t.bind("Shift+>",u),()=>{n.off("ratechange",r),e.hub.off("canvasClick",o),t.unbind("Shift+<",s),t.unbind("Shift+>",u)}},[t,n,e.hub]);let c=(0,o.useMemo)(()=>{let e={};for(let t of eP)e[t]=er(()=>{n.playbackRate=t,i(a.Main)});return e},[n]),h=(0,o.useMemo)(()=>er(()=>i(e=>e===a.None?a.Main:a.None)),[]),d=er(()=>i(a.Main)),m=er(()=>i(a.Speed)),p=er(()=>i(a.Captions)),f=(0,o.useMemo)(()=>({display:r===a.Main?"block":"none"}),[r]),v=(0,o.useMemo)(()=>({display:r===a.Speed?"block":"none"}),[r]),y=(0,o.useMemo)(()=>({display:r===a.Captions?"block":"none"}),[r]),b=(0,o.useRef)();(0,o.useEffect)(()=>{b.current=function(e){for(let t of Array.from(e.querySelectorAll("audio")))if(eR(t).length>0)return t}(e.canvas),b.current&&(g.current=eR(b.current))},[e.canvas]);let g=(0,o.useRef)([]),k=g.current.find(e=>"showing"===e.mode),E=(0,o.useMemo)(()=>er(e=>{let t=-1,n=e.currentTarget;for(;n=n.previousElementSibling;)t++;for(let e=0;e<g.current.length;++e)e!==t&&(g.current[e].mode="disabled",g.current[e].mode="hidden",g.current[e].mode="disabled");t>=0&&(g.current[t].mode="showing"),u()}),[u]);return o.createElement("div",{className:"lv-controls-settings"},o.createElement("div",{className:"lv-settings-speed-dialog",style:v},o.createElement("span",{className:"lv-dialog-subtitle",...d},"< Speed"),o.createElement("ul",null,eP.map(e=>o.createElement("li",{className:e===s?"selected":"",key:e,...c[e]},1===e?"Normal":e.toString())))),o.createElement("div",{className:"lv-settings-captions-dialog",style:y},o.createElement("span",{className:"lv-dialog-subtitle",...d},"< Captions"),o.createElement("ul",null,o.createElement("li",{className:k?"":"selected",...E},"Off"),g.current.map(e=>o.createElement("li",{className:e===k?"selected":"",key:e.id||e.label||e.language,...E},eA(e))))),o.createElement("div",{className:"lv-settings-dialog",style:f},o.createElement("table",null,o.createElement("tbody",null,o.createElement("tr",{...m},o.createElement("th",{scope:"row"},"Speed"),o.createElement("td",null,1===s?"Normal":s," >")),g.current.length>0&&o.createElement("tr",{...p},o.createElement("th",{scope:"row"},"Subtitles (",g.current.length,")"),o.createElement("td",null,eA(k)," >"))))),o.createElement("svg",{...h,viewBox:"0 0 48 48"},o.createElement("path",{fill:"#FFF",d:"m24.04 0.14285c-1.376 0-2.7263 0.12375-4.0386 0.34741l-0.64 6.7853c-1.3572 0.37831-2.6417 0.90728-3.8432 1.585l-5.244-4.3317c-2.2152 1.5679-4.1541 3.4955-5.7217 5.7101l4.3426 5.2437c-0.67695 1.2001-1.2177 2.4878-1.5959 3.8432l-6.7745 0.64053c-0.22379 1.3127-0.34741 2.6622-0.34741 4.0386 0 1.3788 0.12285 2.7238 0.34741 4.0386l6.7745 0.64056c0.37825 1.3554 0.91896 2.6431 1.5959 3.8432l-4.3317 5.2437c1.5648 2.2089 3.4908 4.1457 5.6997 5.7105l5.2545-4.3426c1.2023 0.67835 2.485 1.2174 3.8432 1.5959l0.64053 6.7853c1.3123 0.22368 2.6626 0.33658 4.0386 0.33658s2.7155-0.11289 4.0278-0.33658l0.64053-6.7853c1.3582-0.37847 2.6409-0.91755 3.8432-1.5959l5.2545 4.3426c2.2088-1.5649 4.1348-3.5017 5.6997-5.7105l-4.3317-5.2437c0.67695-1.2001 1.2177-2.4878 1.5959-3.8432l6.7744-0.64056c0.22456-1.3148 0.34741-2.6598 0.34741-4.0386 0-1.3765-0.12361-2.726-0.34741-4.0386l-6.7744-0.64053c-0.37825-1.3554-0.91896-2.6431-1.5959-3.8432l4.3426-5.2437c-1.568-2.2146-3.507-4.1422-5.722-5.7101l-5.2437 4.3317c-1.2015-0.67776-2.486-1.2067-3.8432-1.585l-0.641-6.7853c-1.3123-0.22366-2.6518-0.34741-4.0278-0.34741zm0 14.776c5.0178 0 9.076 4.0691 9.076 9.0869s-4.0582 9.0869-9.076 9.0869-9.0869-4.0691-9.0869-9.0869 4.0691-9.0869 9.0869-9.0869z"})))}function eA(e){return void 0===e?"Off":e.label||e.language}function eR(e){return Array.from(e.textTracks).filter(e=>["captions","subtitles"].includes(e.kind))}function eO(e,t){return e[m(0,t,e.length-1)]}function eF(){let e=R(),t=ea();return(0,o.useEffect)(()=>(e.on("durationchange",t),e.on("seek",t),e.on("timeupdate",t),()=>{e.off("durationchange",t),e.off("seek",t),e.off("timeupdate",t)}),[t,e]),o.createElement("span",{className:"lv-controls-time"},o.createElement("span",{className:"lv-current-time"},W(e.currentTime)),o.createElement("span",{className:"lv-time-separator"},"/"),o.createElement("span",{className:"lv-total-time"},W(e.duration)))}function eD(){let e=K(),t=R(),n=ea(),r=(0,o.useCallback)(()=>t.volume=t.volume+.05,[t]),i=(0,o.useCallback)(()=>t.volume=t.volume-.05,[t]),a=(0,o.useCallback)(()=>t.muted=!t.muted,[t]);(0,o.useEffect)(()=>(t.on("volumechange",n),e.bind("ArrowUp",r),e.bind("ArrowDown",i),e.bind("M",a),()=>{t.off("volumechange",n),e.unbind("ArrowUp",r),e.unbind("ArrowDown",i),e.unbind("M",a)}),[i,n,r,e,t,a]);let s=(0,o.useCallback)(e=>{t.volume=parseFloat(e.target.value)/100},[t]),l=(0,o.useMemo)(()=>er(()=>t.muted=!t.muted),[t]),u=(t.muted?eE.UNMUTE:eE.MUTE)+" (m)",c=new Intl.NumberFormat(void 0,{style:"percent"}).format(t.volume)+" volume";return o.createElement("div",{className:"lv-controls-volume"},o.createElement("button",{"aria-label":u,title:u},o.createElement("svg",{...l,viewBox:"0 0 100 100"},eB,t.muted?eV:o.createElement("g",null,t.volume>0&&eI,t.volume>=.5&&eU))),o.createElement("input",{"aria-valuetext":c,min:"0",max:"100",onChange:s,type:"range",value:t.muted?0:100*t.volume}))}(r=a||(a={}))[r.None=0]="None",r[r.Main=1]="Main",r[r.Speed=2]="Speed",r[r.Captions=3]="Captions";let eB=o.createElement("path",{d:"M 10 35 h 20 l 25 -20 v 65 l -25 -20 h -20 z",fill:"white",stroke:"none"}),eV=o.createElement("path",{d:"M 63 55 l 20 20 m 0 -20 l -20 20",stroke:"white",strokeWidth:"7"}),eI=o.createElement("path",{d:"M 62 32.5 a 1,1 0 0,1 0,30",fill:"white",stroke:"none"}),eU=o.createElement("path",{d:"M 62 15 a 1,1 0 0,1 0,65 v -10 a 10,10 0 0,0 0,-45 v -10 z",fill:"white",stroke:"none"}),ej=Symbol(),ez=Symbol();class eK extends o.PureComponent{canPlay;canPlayThrough;canvas;captureKeys;hub;keymap;playback;script;buffers;__canPlayTasks;__canPlayThroughTasks;dag;static Context=en("@liqvid/player",null);static symbol=Symbol();static defaultControlsLeft=o.createElement(o.Fragment,null,o.createElement(eL,null),o.createElement(eD,null),o.createElement(eF,null));static defaultControlsRight=o.createElement(o.Fragment,null,o.createElement(eu,null),o.createElement(eN,null),o.createElement(eC,null));static defaultProps={controls:o.createElement(o.Fragment,null,eK.defaultControlsLeft,o.createElement("div",{className:"lv-controls-right"},eK.defaultControlsRight)),style:{}};constructor(e){super(e),this.hub=new v.exports.EventEmitter,this.__canPlayTasks=[],this.__canPlayThroughTasks=[],this.keymap=new U,this.captureKeys=!0,e.script?(this.script=e.script,this.playback=this.script.playback):this.playback=e.playback,this.buffers=new Map,h(this,["onMouseUp","suspendKeyCapture","resumeKeyCapture","reparseTree"]),this.updateTree=this.updateTree.bind(this)}componentDidMount(){this.canvas.parentElement[eK.symbol]=this,document.body.addEventListener("keydown",e=>{this.captureKeys&&document.activeElement===document.body&&this.keymap.handle(e)}),this.canPlay=Promise.all(this.__canPlayTasks).then(()=>{this.hub.emit("canplay")}),this.canPlayThrough=Promise.all(this.__canPlayThroughTasks).then(()=>{this.hub.emit("canplaythrough")}),this.script&&(this.dag=eH(this.canvas,this.script.markerNumberOf),this.script.on("markerupdate",this.updateTree),this.updateTree())}updateTree(){let{script:e}=this;function t(e){e.element.style.opacity="0",e.element.style["pointer-events"]="none",e.element.setAttribute("aria-hidden","true")}function n(e){return e.element.style.removeProperty("opacity"),e.element.style.removeProperty("pointer-events"),e.element.removeAttribute("aria-hidden"),e.children.forEach(r)}function r(i){if(void 0!==i.first){if(i.first<=e.markerIndex&&(!i.last||e.markerIndex<i.last))return n(i);t(i)}else if(void 0===i.during)return i.children.forEach(r);else return e.markerName.startsWith(i.during)?n(i):t(i)}r(this.dag)}canvasClick(){this.hub.listeners("canvasClick").every(e=>e()??!0)&&(this.playback.paused?this.playback.play():this.playback.pause()),this.hub.emit("canvasClick")}onMouseUp(e){!(["a","area","button","input","option","select","textarea"].includes(e.target.nodeName.toLowerCase())||e.target?.closest('*[data-affords~="click"]'))&&(e.nativeEvent[ez]||this.canvasClick())}static allowScroll(e){("nativeEvent"in e?e.nativeEvent:e)[ej]=!0}static preventCanvasClick(e){("nativeEvent"in e?e.nativeEvent:e)[ez]=!0}suspendKeyCapture(){this.captureKeys=!1}resumeKeyCapture(){this.captureKeys=!0}ready(){console.info(".ready() is a noop in v2.1")}reparseTree(e){let t=function e(t,n){if(!n.element.contains(t))return null;for(let r=0;r<n.children.length;++r)if(n.children[r].element.contains(t))return e(t,n.children[r])??n;return n}(e,this.dag);if(!t)throw Error("Could not find node in tree");t.children=eH(t.element,this.script.markerNumberOf).children,this.updateTree()}registerBuffer(e){this.buffers.set(e,[])}unregisterBuffer(e){this.buffers.delete(e)}updateBuffer(e,t){this.buffers.set(e,t),this.playback.emit("bufferupdate")}obstruct(e,t){"canplay"===e?this.__canPlayTasks.push(t):this.__canPlayThroughTasks.push(t)}render(){let e={style:this.props.style},t=Z?{onMouseUp:this.onMouseUp}:{};return o.createElement(eK.Context.Provider,{value:this},o.createElement(A.Provider,{value:this.playback},o.createElement(z.Provider,{value:this.keymap},o.createElement("div",{className:"lv-player ractive-player",...e},o.createElement("div",{className:"rp-canvas lv-canvas",...t,ref:e=>this.canvas=e},this.props.children),o.createElement(F,null),o.createElement(el,{controls:this.props.controls,thumbs:this.props.thumbs})))))}}function eH(e,t){let n=Array.from(e.querySelectorAll("*[data-from-first], *[data-during]")),r={children:[],element:e},i=[r];for(let e of n){let n,r,a;e.dataset.fromFirst?(n=e.dataset.fromFirst,r=e.dataset.fromLast):e.dataset.during&&(a=e.dataset.during),e.style.opacity="0",e.style.pointerEvents="none";let o={children:[],element:e};a&&(o.during=a),n&&(o.first=t(n)),r&&(o.last=t(r));let s=i[i.length-1];for(;!s.element.contains(e);)i.pop(),s=i[i.length-1];s.children.push(o),i.push(o)}return r}class eG extends o.PureComponent{playback;player;domElement;start;static defaultProps={obstructCanPlay:!1,obstructCanPlayThrough:!1};static contextType=eK.Context;constructor(e,t){super(e,t),this.player=t,this.playback=t.playback,this.start=this.props.start??0,h(this,["pause","play","onPlay","onRateChange","onSeek","onTimeUpdate","onVolumeChange","onDomPlay","onDomPause"])}componentDidMount(){this.playback.on("pause",this.pause),this.playback.on("play",this.onPlay),this.playback.on("ratechange",this.onRateChange),this.playback.on("seek",this.onSeek),this.playback.on("seeking",this.pause),this.playback.on("timeupdate",this.onTimeUpdate),this.playback.on("volumechange",this.onVolumeChange),this.domElement.addEventListener("play",this.onDomPlay),this.domElement.addEventListener("pause",this.onDomPause),this.props.obstructCanPlay&&this.player.obstruct("canplay",s(this.domElement)),this.props.obstructCanPlayThrough&&this.player.obstruct("canplaythrough",l(this.domElement)),this.onVolumeChange()}componentWillUnmount(){this.playback.off("pause",this.pause),this.playback.off("play",this.onPlay),this.playback.off("ratechange",this.onRateChange),this.playback.off("seek",this.onSeek),this.playback.off("seeking",this.pause),this.playback.off("timeupdate",this.onTimeUpdate),this.playback.off("volumechange",this.onVolumeChange),this.domElement.removeEventListener("pause",this.onDomPause),this.domElement.removeEventListener("play",this.onDomPlay)}get end(){return this.start+1e3*this.domElement.duration}pause(){this.domElement.ended||(this.domElement.removeEventListener("pause",this.onDomPause),this.domElement.pause(),this.domElement.addEventListener("pause",this.onDomPause))}play(){this.domElement.removeEventListener("play",this.onDomPlay);let e=this.domElement.play();return this.domElement.addEventListener("play",this.onDomPlay),e}onPlay(){this.onTimeUpdate(this.playback.currentTime)}onRateChange(){this.domElement.playbackRate=this.playback.playbackRate}onSeek(e){this.domElement.currentTime=(e-this.start)/1e3,c(this.start,e,this.end)?!this.domElement.paused||this.playback.paused||this.playback.seeking||this.play().catch(this.playback.pause):this.domElement.paused||this.pause()}onTimeUpdate(e){c(this.start,e,this.end)?this.domElement.paused&&(this.domElement.currentTime=(e-this.start)/1e3,this.play().catch(this.playback.pause)):(this.domElement.paused||this.pause(),this.domElement.currentTime=(e-this.start)/1e3)}onVolumeChange(){this.domElement.volume=this.playback.volume,this.domElement.muted=this.playback.muted}onDomPlay(){this.playback.paused&&(this.playback.off("play",this.onPlay),this.playback.play(),this.playback.on("play",this.onPlay))}onDomPause(){this.playback.seeking||this.playback.paused||function(e,t=.5){return e.ended||e.duration-e.currentTime<t}(this.domElement)||(this.playback.off("pause",this.pause),this.playback.pause(),this.playback.on("pause",this.pause))}}class eX extends eG{componentDidMount(){for(let e of(super.componentDidMount(),Array.from(this.domElement.textTracks))){if(!["captions","subtitles"].includes(e.kind))continue;let t=e.mode;e.addEventListener("cuechange",()=>{if("showing"!==e.mode){"showing"===t&&(this.playback.captions=[]),t=e.mode;return}t=e.mode;let n=[];for(let t of Array.from(e.activeCues)){let e=t.text.replace(/\n/g,"<br/>");n.push(function(e){let t=document.createElement("template");return t.innerHTML=e,t.content.cloneNode(!0)}(e))}this.playback.captions=n})}}render(){let{start:e,obstructCanPlay:t,obstructCanPlayThrough:n,children:r,...i}=this.props;return o.createElement("audio",{preload:"auto",ref:e=>this.domElement=e,...i},r)}}class eq extends o.PureComponent{static Context=o.createContext([]);foundIds;constructor(e){super(e),h(this,["renderContent"]),this.foundIds=new Set}render(){return this.props.hasOwnProperty("map")?o.createElement(eq.Context.Provider,{value:[this.foundIds,this.props.map]},this.renderContent([this.foundIds,this.props.map])):o.createElement(eq.Context.Consumer,null,this.renderContent)}renderContent([e,t]){return ei(this.props.children,n=>{let r={};if(n.props.hasOwnProperty("id")){let{id:i}=n.props;e.add(i),void 0!==t[i]&&Object.assign(r,t[i])}return 0===Object.keys(r).length?n:o.cloneElement(n,r)})}}class eY extends v.exports.EventEmitter{constructor(e){super(),this.currentTime=0,this.paused=!0,this.__captions=[],this.__playbackRate=1,this.__muted=!1,this.__seeking=!1,this.__volume=1,this.duration=e.duration,this.__playingFrom=0,this.__startTime=performance.now(),this.__initAudio(),this.setMaxListeners(0),h(this,["pause","play"]),this.__advance=this.__advance.bind(this),requestAnimationFrame(this.__advance)}get captions(){return this.__captions}set captions(e){this.__captions=e,this.emit("cuechange")}get duration(){return this.__duration}set duration(e){e!==this.__duration&&(this.__duration=e,this.emit("durationchange"))}get muted(){return this.__muted}set muted(e){e!==this.__muted&&(this.__muted=e,this.audioNode&&(this.__muted?this.audioNode.gain.value=0:this.audioNode.gain.setValueAtTime(this.volume,this.audioContext.currentTime)),this.emit("volumechange"))}get playbackRate(){return this.__playbackRate}set playbackRate(e){e!==this.__playbackRate&&(this.__playbackRate=e,this.__playingFrom=this.currentTime,this.__startTime=performance.now(),this.emit("ratechange"))}get seeking(){return this.__seeking}set seeking(e){e!==this.__seeking&&(this.__seeking=e,this.__seeking?this.emit("seeking"):this.emit("seeked"))}pause(){this.paused=!0,this.__playingFrom=this.currentTime,this.emit("pause")}play(){this.paused=!1,this.currentTime=this.__playingFrom,this.__startTime=performance.now(),this.emit("play")}seek(e){e=p(0,e,this.duration),this.currentTime=this.__playingFrom=e,this.__startTime=performance.now(),this.emit("seek",e),this.currentTime>=this.duration&&this.stop()}get volume(){return this.__volume}set volume(e){this.muted=!1;let t=this.__volume;this.__volume=p(0,e,1),this.audioNode&&(0===t||0===this.__volume?this.audioNode.gain.setValueAtTime(0,this.audioContext.currentTime):this.audioNode.gain.exponentialRampToValueAtTime(this.__volume,this.audioContext.currentTime+2)),this.emit("volumechange")}stop(){this.paused=!0,this.__playingFrom=0,this.emit("stop")}__advance(e){this.paused||this.__seeking?this.__startTime=e:(this.currentTime=this.__playingFrom+Math.max((e-this.__startTime)*this.__playbackRate,0),this.currentTime>=this.duration&&(this.currentTime=this.duration,this.stop()),this.emit("timeupdate",this.currentTime)),requestAnimationFrame(this.__advance)}__initAudio(){let e=()=>{try{this.audioContext=new(window.AudioContext||webkitAudioContext),this.audioNode=this.audioContext.createGain(),this.audioNode.connect(this.audioContext.destination),window.removeEventListener("click",e),window.removeEventListener("keydown",e),window.removeEventListener("touchstart",e)}catch(e){}};window.addEventListener("click",e),window.addEventListener("keydown",e),window.addEventListener("touchstart",e)}}class e$ extends eY{constructor(e){super(e),this.__animations=[],this.__delays=new WeakMap,this.__createTimeline()}newAnimation(e,t){let n;return r=>{if(null===r){n.cancel(),n=void 0;return}void 0!==n&&console.warn("Animations should not be reused as they will not cancel properly. Check animations attached to ",r),n=new Animation(new KeyframeEffect(r,e,t),this.timeline),"object"==typeof t&&("forwards"===t.fill||"both"===t.fill)&&n.persist();let i=n.effect.getTiming().delay;return this.__delays.set(n.effect,i),n.currentTime=(this.currentTime-i)/this.playbackRate,n.startTime=null,n.pause(),0!==i&&n.effect.updateTiming({delay:.1}),this.__animations.push(n),n.addEventListener("cancel",()=>{this.__animations.splice(this.__animations.indexOf(n),1)}),n}}__createTimeline(){void 0!==window.DocumentTimeline&&(this.timeline=new DocumentTimeline,this.on("pause",()=>{for(let e of this.__animations)e.pause()}),this.on("play",()=>{for(let e of this.__animations)e.startTime=null,e.play(),e.startTime=this.timeline.currentTime+(this.__delays.get(e.effect)-this.currentTime)/this.playbackRate}),this.on("ratechange",()=>{for(let e of this.__animations)e.playbackRate=this.playbackRate}),this.on("seek",()=>{for(let e of this.__animations){let t=(this.__delays.get(e.effect)-this.currentTime)/this.playbackRate;this.paused?(e.currentTime=-t,e.pause()):e.startTime=this.timeline.currentTime+t}}))}}Object.defineProperty(e$.prototype,"hub",{get:function(){return this}});let eW=e$.prototype.seek;e$.prototype.seek=function(e){"string"==typeof e&&(e=$(e)),eW.call(this,e)};class eQ extends v.exports.EventEmitter{playback;markers;markerIndex;constructor(e){super(),this.setMaxListeners(0),h(this,["back","forward","markerByName","markerNumberOf","parseStart","parseEnd","__updateMarker"]);let t=0;for(let n of e){if(2===n.length){let[,e]=n;n[1]=t,n[2]=t+("string"==typeof e?$(e):e)}else{let[,e,t]=n;n[1]="string"==typeof e?$(e):e,n[2]="string"==typeof t?$(t):t}t=n[2]}this.markers=e,this.markerIndex=0,this.playback=new e$({duration:this.markers[this.markers.length-1][2]}),this.playback.on("seek",this.__updateMarker),this.playback.on("timeupdate",this.__updateMarker)}get hub(){return this}get markerName(){return this.markers[this.markerIndex][0]}back(){this.playback.seek(this.markers[Math.max(0,this.markerIndex-1)][1])}forward(){this.playback.seek(this.markers[Math.min(this.markers.length-1,this.markerIndex+1)][1])}markerByName(e){return this.markers[this.markerNumberOf(e)]}markerNumberOf(e){for(let t=0;t<this.markers.length;++t)if(this.markers[t][0]===e)return t;throw Error(`Marker ${e} does not exist`)}parseStart(e){return"string"!=typeof e?e:e.match(Y)?$(e):this.markerByName(e)[1]}parseEnd(e){return"string"!=typeof e?e:e.match(Y)?$(e):this.markerByName(e)[2]}__updateMarker(e){let t;for(let n=0;n<this.markers.length;++n){let[,r,i]=this.markers[n];if(c(r,e,i)){t=n;break}}if(void 0===t&&(t=this.markers.length-1),t!==this.markerIndex){let e=this.markerIndex;this.markerIndex=t,this.emit("markerupdate",e)}}}var eJ="function"==typeof Float32Array;function eZ(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function e0(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function e1(e){return e}var e2=Object.freeze({__proto__:null,animate:function e(t){if(t instanceof Array){t.sort((e,t)=>e.startTime-t.startTime);let n=t.map(e);return e=>{let r=0;for(;r<n.length;++r)if(t[r].startTime>e){if(0===r)return t[0].startValue;return n[r-1](e)}return n[t.length-1](e)}}"startValue"in t||(t.startValue=0),"endValue"in t||(t.endValue=1),"easing"in t||(t.easing=e=>e);let{startValue:n,endValue:r,startTime:i,duration:a,easing:o}=t;return e=>d(n,r,o(m(0,(e-i)/a,1)))},bezier:function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return e1;for(var i=eJ?new Float32Array(11):Array(11),a=0;a<11;++a)i[a]=eZ(.1*a,e,n);return function(a){return 0===a?0:1===a?1:eZ(function(t){for(var r=0,a=1;10!==a&&i[a]<=t;++a)r+=.1;var o=r+(t-i[--a])/(i[a+1]-i[a])*.1,s=e0(o,e,n);return s>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var a=e0(t,n,r);if(0===a)break;var o=eZ(t,n,r)-e;t-=o/a}return t}(t,o,e,n):0===s?o:function(e,t,n,r,i){var a,o,s=0;do(a=eZ(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o;while(Math.abs(a)>1e-7&&++s<10);return o}(t,r,r+.1,e,n)}(a),t,r)}},easings:{easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},replay:function({data:e,start:t,end:n,active:r,inactive:i,compressed:a,units:o=1}){void 0===a&&(a=!1),void 0===t&&(t=0);let s=e.map(a?e=>e[0]/o:e=>e[0]);if(a)for(let e=1;e<s.length;++e)s[e]+=s[e-1];void 0===n&&(n=t+s[s.length-1]);let l=0,u=0,c=!0;return function(a){if(a<t||a>=n)return c?(c=!1,i()):void 0;c=!0,a<l&&(u=0),l=a;let o=Math.min(u,s.length-1);for(;u<s.length&&t+s[u]<a;u++)o=u;let[,h]=e[o];r(h,o)}}}),e5=Object.freeze({__proto__:null,showIf:function(e){return e?{}:{style:{opacity:0,pointerEvents:"none"}}},during:function(e){return{"data-during":e}},from:function(e,t){return{"data-from-first":e,"data-from-last":t}}});function e3(e,t=()=>{},n=()=>{}){let r;let i=ee(e,(e,...t)=>{r=t},n);return e=>{(e instanceof MouseEvent||"nativeEvent"in e&&e.nativeEvent instanceof MouseEvent)&&0!==e.button||("nativeEvent"in e?i(e.nativeEvent):i(e),t(e,...r))}}var e4=Object.freeze({__proto__:null,dragHelper:e3,dragHelperReact:function(e,t,n,r){let i=e3(e,t,n);if(!r)return{"data-affords":"click",onMouseDown:i,onTouchStart:i};{let e=et(e=>e.addEventListener("touchstart",i,{passive:!1}),r);return{"data-affords":"click",onMouseDown:i,ref:e}}}});let e6={};function e9(e){return e.map(e=>e[0]).reduce((e,t)=>e+t,0)}var e7=Object.freeze({__proto__:null,animation:e2,authoring:e5,interactivity:e4,json:Object.freeze({__proto__:null,loadAllJSON:function(){return Promise.all(Array.from(document.querySelectorAll("link[data-name][rel='preload'][type='application/json']")).map(e=>fetch(e.href).then(e=>e.json()).then(t=>e6[e.dataset.name]=t))).then()},loadJSON:function(e){return new Promise((t,n)=>{if(e6[e])return t(e6[e]);let r=document.querySelector(`link[data-name="${e}"][rel='preload'][type='application/json']`);return r?fetch(r.href).then(e=>e.json()).then(n=>{e6[e]=n,t(n)}).catch(n):n(`JSON record "${e}" not found`)})},getJSON:function(e){if(!e6[e])throw Error(`JSON record "${e}" not loaded`);return e6[e]}}),media:u,misc:f,mobile:Object.freeze({__proto__:null,onClick:(e,t)=>{if(Z)return{onClick:e};{let n,r;let i=e=>{"number"!=typeof n&&(r=e.currentTarget,n=e.changedTouches[0].identifier)},a=t=>{if("number"==typeof n){for(let i of Array.from(t.changedTouches))if(i.identifier===n){r.contains(document.elementFromPoint(i.clientX,i.clientY))&&e(t),n=void 0;break}}};return{ref:et(e=>{e.addEventListener("touchstart",i,{passive:!1}),e.addEventListener("touchend",a,{passive:!1})},t)}}},anyHover:Z,attachClickHandler:function(e,t){let n;if(Z)return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)};let r=e=>{"number"!=typeof n&&(n=e.changedTouches[0].identifier)},i=r=>{if("number"==typeof n)for(let i of Array.from(r.changedTouches))i.identifier===n&&(e.contains(document.elementFromPoint(i.clientX,i.clientY))&&t(r),n=void 0)};return e.addEventListener("touchstart",r),e.addEventListener("touchend",i),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchend",i)}}}),react:eo,replayData:Object.freeze({__proto__:null,concat:function(...e){let[t,...n]=e,r=[...t[0]],i=t[1]+e9(t[0]);for(let[e,t]of n){let n=e.slice();n[0][0]+=t-i,r.push(...n),i+=e9(n)}return r},length:e9}),svg:Object.freeze({__proto__:null,screenToSVG:function(e,t,n){let r=e;for(;!(r instanceof SVGGraphicsElement);)r=r.parentNode;let i=e instanceof SVGSVGElement?e:e.ownerSVGElement,a=r.getScreenCTM().inverse(),o=i.createSVGPoint();return o.x=t,o.y=n,[(o=o.matrixTransform(a)).x,o.y]},screenToSVGVector:function(e,t,n){let r=e.getBoundingClientRect(),i=e.viewBox.baseVal;return[t/(r.width/i.width),n/(r.height/i.height)]}}),time:Q});class e8 extends eG{render(){let{start:e,children:t,obstructCanPlay:n,obstructCanPlayThrough:r,...i}=this.props;return o.createElement("video",{playsInline:!0,preload:"auto",ref:e=>this.domElement=e,...i},t)}}let te={Captions:eu,FullScreen:eC,PlayPause:eL,ScrubberBar:es,Settings:eN,TimeDisplay:eF,Volume:eD};ec&&!window.hasOwnProperty("RactivePlayer")&&Object.defineProperty(window,"RactivePlayer",{get(){if(void 0!==window.Liqvid)return window.Liqvid}})}}]);