(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{5400:function(e,t,n){Promise.resolve().then(n.bind(n,8234))},8234:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var s=n(3827),r=n(5960),i=n(4090);let l=(0,i.createContext)(void 0);function o(){let{camera:e}=(0,r.A)(),t=(0,i.useContext)(l);return(0,i.useEffect)(()=>{let n=n=>{t&&n.getModifierState("Shift")&&(console.log(c(e.position)),console.log(c(t.target)))};return document.body.addEventListener("click",n),()=>{document.body.removeEventListener("click",n)}},[e,t]),null}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object.values(e).map(e=>parseFloat(e.toFixed(t)))}var a=n(3618),u=n(9631),d=n(6093);let x=Math.PI/180,h=2*Math.PI;var j=n(7526),m=n(3769);function f(e){let{onChange:t,value:n}=e,r=(0,i.useRef)(null),l=(0,i.useMemo)(()=>(0,j.dz)((e,n)=>{let[s,i]=(0,m.K)(r.current,n.x,n.y);null==t||t((Math.atan2(-i,s)+h)%h)},()=>{document.body.classList.add("dragging")},()=>{document.body.classList.remove("dragging")}),[t]);return(0,s.jsxs)("svg",{"aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":n/x,className:"mx-auto block h-20",viewBox:"-50 -50 100 100",children:[(0,s.jsx)("circle",{className:"fill-none stroke-black dark:stroke-white",cx:"0",cy:"0",r:45}),(0,s.jsx)("circle",{className:"fill-[#ff0070] hover:cursor-grab",cx:45*Math.cos(n),cy:-(45*Math.sin(n)),r:"5",ref:r,...l})]})}var p=n(2492);function g(e){let{className:t,children:n}=e,r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{r.current&&p.Z.render(null!=n?n:"",r.current,{throwOnError:!1})},[n]),(0,s.jsx)("span",{className:t,ref:r})}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(e.toFixed(t))}n(8128);var y=n(3773),v=n(29),S=n(8132),C=n(4611);let k=(0,S.Z)((0,C.XR)(()=>({cube:[1,.5,.5],cylinder:{z:.5,theta:.75*h},torus:[.05*h,.7*h]})));function w(){let e=(0,d._)(["{}^circ"],["{}^\\circ"]);return w=function(){return e},e}function M(){let e=(0,d._)(["{}^circ"],["{}^\\circ"]);return M=function(){return e},e}let{raw:E}=String,N=e=>parseFloat(e.currentTarget.value);function z(e){return t=>{k.setState(n=>({cube:[...n.cube.slice(0,e),parseFloat(t.currentTarget.value),...n.cube.slice(e+1)]}))}}let F=e=>(0,s.jsx)("input",{className:"ml-2 w-16 outline outline-1 outline-gray-200",type:"number",...e});function G(e){return t=>{k.setState(n=>({torus:[...n.torus.slice(0,e),t,...n.torus.slice(e+1)]}))}}function L(){return(0,s.jsxs)("form",{className:"flex w-full justify-around pt-2",children:[(0,s.jsx)(_,{}),(0,s.jsx)(I,{}),(0,s.jsx)(R,{})]})}function _(){let e=k(e=>e.cube);return(0,s.jsxs)("table",{children:[(0,s.jsx)("caption",{children:(0,s.jsx)(g,{children:"I\\times I\\times I"})}),(0,s.jsx)("tbody",{children:(0,y.w6)(0,3).map(t=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("input",{min:0,max:1,step:.01,onChange:z(t),type:"range",value:e[t]})}),(0,s.jsx)("td",{children:(0,s.jsx)(F,{min:0,max:1,step:.01,onChange:z(t),value:e[t]})})]},t))})]})}function I(){let{z:e,theta:t}=k(e=>e.cylinder,v.Z),n=(0,i.useCallback)(e=>k.setState(t=>({cylinder:{...t.cylinder,z:parseFloat(e.currentTarget.value)}})),[]),r=(0,i.useCallback)(e=>k.setState(t=>({cylinder:{...t.cylinder,theta:e}})),[]);return(0,s.jsxs)("table",{children:[(0,s.jsx)("caption",{children:(0,s.jsx)(g,{children:"I\\times S^1"})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("input",{onChange:n,min:0,max:1,step:.01,type:"range",value:e})}),(0,s.jsx)("td",{children:(0,s.jsx)(F,{onChange:n,min:0,max:1,step:.01,value:e})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(f,{onChange:r,value:t})}),(0,s.jsxs)("td",{children:[(0,s.jsx)(F,{onChange:e=>r(N(e)*x),min:0,max:360,step:.01,value:b(t/x)}),(0,s.jsx)(g,{children:E(w())})]})]})]})]})}function R(){let e=k(e=>e.torus);return(0,s.jsxs)("table",{children:[(0,s.jsx)("caption",{children:(0,s.jsx)(g,{children:"S^1\\times S^1"})}),(0,s.jsx)("tbody",{children:(0,y.w6)(0,2).map(t=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(f,{onChange:G(t),value:e[t]})}),(0,s.jsxs)("td",{children:[(0,s.jsx)(F,{onChange:e=>G(t)(N(e)*x),min:0,max:360,step:.01,value:b(e[t]/x)}),(0,s.jsx)(g,{children:E(M())})]})]},t))})]})}var O=n(6376);let P=new O.BoxGeometry(1,1,1);function B(e){let t=(0,i.useRef)(null);(0,i.useEffect)(()=>k.subscribe(e=>e.cube,e=>{t.current.position.set(...e)}),[]);let n=k.getState().cube;return(0,s.jsxs)("group",{...e,children:[(0,s.jsxs)("lineSegments",{name:"cube skeleton",position:[.5,.5,.5],children:[(0,s.jsx)("edgesGeometry",{args:[P]}),(0,s.jsx)("lineBasicMaterial",{color:"white"})]}),(0,s.jsxs)("mesh",{name:"cube",position:[.5,.5,.5],children:[(0,s.jsx)("boxGeometry",{args:[1,1,1]}),(0,s.jsx)("meshStandardMaterial",{color:"red",opacity:.5,transparent:!0})]}),(0,s.jsx)("mesh",{name:"cube point",position:n,ref:t,children:(0,s.jsx)("sphereGeometry",{args:[.03,32,32]})})]})}let{cos:D,sin:T}=Math;function Z(e){let{r:t,z:n,theta:s}=e;return[t*D(s),t*T(s),n]}function X(e,t,n,s){return[(e+t*D(n))*D(s),(e+t*D(n))*T(s),t*T(n)]}function A(e){let t=(0,i.useRef)(null);(0,i.useEffect)(()=>k.subscribe(e=>e.cylinder,e=>{let{z:n,theta:s}=e;t.current.position.set(...Z({r:.5,z:2*n,theta:s}))}),[]);let{z:n,theta:r}=k.getState().cylinder;return(0,s.jsxs)("group",{...e,children:[(0,s.jsxs)("mesh",{position:[0,0,1],rotation:[h/4,0,0],children:[(0,s.jsx)("cylinderGeometry",{args:[.5,.5,2,32,32,!0]}),(0,s.jsx)("meshStandardMaterial",{color:"blue",side:O.DoubleSide})]}),(0,s.jsx)("mesh",{position:Z({r:.5,z:2*n,theta:r}),ref:t,children:(0,s.jsx)("sphereGeometry",{args:[.03,32,32]})})]})}function K(e){let t=(0,i.useRef)(null);(0,i.useEffect)(()=>k.subscribe(e=>e.torus,e=>{let[n,s]=e;t.current.position.set(...X(2,.5,n,s))}),[]);let[n,r]=k.getState().torus;return(0,s.jsxs)("group",{...e,children:[(0,s.jsxs)("mesh",{name:"torus",children:[(0,s.jsx)("torusGeometry",{args:[2,.5,32,32]}),(0,s.jsx)("meshStandardMaterial",{color:"green",side:O.DoubleSide})]}),(0,s.jsx)("mesh",{name:"torus point",position:X(2,.5,n,r),ref:t,children:(0,s.jsx)("sphereGeometry",{args:[.03,32,32]})})]})}let q=[2.31,-5.86,2.11],H=[2.3,-.29,-1.81],J=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ambientLight",{intensity:3}),(0,s.jsx)("pointLight",{intensity:30,position:[0,-2,2]}),(0,s.jsx)("pointLight",{intensity:30,position:[0,2,2]}),(0,s.jsx)("pointLight",{intensity:30,position:[4,-1,2]}),(0,s.jsx)(B,{position:[-3,-.5,-.5]}),(0,s.jsx)(A,{position:[0,0,-1]}),(0,s.jsx)(K,{position:[5,0,0]})]});function Q(){let[e,t]=(0,i.useState)();return(0,s.jsxs)("main",{className:"h-screen w-screen",children:[(0,s.jsx)(L,{}),(0,s.jsx)(u.Xz,{camera:{near:.1,far:1e3,up:[0,0,1],position:q,zoom:1},onCreated:e=>{let{gl:t}=e;t.setClearColor("#252934")},children:(0,s.jsxs)(l.Provider,{value:e,children:[(0,s.jsx)(o,{}),(0,s.jsx)(a.z,{enableDamping:!1,target:H,ref:e=>t(e)}),(0,s.jsx)(i.Suspense,{fallback:null,children:(0,s.jsx)(J,{})})]})})]})}}},function(e){e.O(0,[689,954,800,982,971,69,744],function(){return e(e.s=5400)}),_N_E=e.O()}]);